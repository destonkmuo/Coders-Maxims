<!DOCTYPE html>
<html lang="en-US">
   <head>
      <title>Coders Maxims</title>
      <link rel="stylesheet" href="Home.css">
      <link rel="stylesheet" href="en-us/PageAttributes.css">
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
   </head>
   <body>
      <main>
         <img src="Static/blackHole.jpg" id="black-hole"/>
         <div id="intro-view">
            <h1>Programming Fundamentals For All</h1>
            <p>Fostering New Principles And People</p>
            <!--<p>Less Than 50% Of United States High Schools Offers A Computer Science Equivalent Course</p>-->
            <div id="home-search-box">
               <i class="fa fa-search"></i>
               <h2 id="search-box-indic">Search For a Computer Science Concept/Topic Below  ▼</h2>
               <input type="text" name="" id="home-input-search" onkeyup='HomeSearch()'placeholder="Search...">
               <ul id="home-search-results-content"></ul>
            </div>

            <div class="page-jumps">
            <div class="learn-page-jump"></div>
            <div class="how-page-jump"></div>
            <div class="practice-page-jump"></div>
            <div class="why-page-jump"></div>
            <div id="content-feed">
               <div class="recent-modules">
                  <ul id="rm-list">
                     <!-- Consist Of The Top 7 Most Recently Updated Or Created Modules, Entire Thing Will Be A Seperate Document Within A Iframe Tag-->
                  </ul>
               </div>
               <div class="social-media-feed"></div>
               <!-- Youtube & Twitter API-->
            </div>
         </div>
      </main>
      <header class="header">
         <nav>
            <img src="Static/homeGraphic.png" id="philosophic-helper"/>
            <!-- When the user scrolls past a specified Height, instantiate this box -->
            <div id="nav-visibility-bar"></div>
            <!-- Contains Home (Update Notes), Modules, Overview, Resources, Projects, References [API], About Me, Contact -->
            <ul class="nav-list">
               <li class="nav-list-item"><a href="../"><img src="Static/CodersMaximsLogo.png" id="HeaderLogo"></img></a></li>
               <li class="nav-list-item"><a href="../">Home</a></li>
               <li class="nav-list-item"><a href="#">Modules</a></li>
               <li class="nav-list-item"><a href="#">Overview</a></li>
               <li class="nav-list-item"><a href="#">Resources</a></li>
               <li class="nav-list-item"><a href="#">Projects</a></li>
               <li class="nav-list-item"><a href="#">References</a></li>
               <li class="nav-list-item"><a href="#">Contact</a></li>
               <!-- About Me As Well Included in Contact-->
               <li class="nav-list-item">
                  <div class="search-box" id="search-button">
                     <button class="btn-search"><img src="Static/SearchLogo.png" id="SearchLogo"></img></button>
                     <i class="fa fa-search"></i>
                     <input type="text" name="" id="input-search" onkeyup='Search()' placeholder="Search...">
                     <ul id="search-results-content">
                        <!-- Example :<a href="Home.html" class="results-lists">Basic Computer History</a> -->
                     </ul>
                     <!-- Search Results Content (10 at most)-->
                  </div>
                  <!-- Alternating "Search... "[Module Names EX:If Loop]" randomly from the Module json, Deletes its self and replaces it by the character-->
               </li>
               <li>
                  <div class="low-nav-width-drop-down">
                     <div id="drop-down-content">
                        <!-- Inside the actual drop down -->
                        <ul class="low-width-nav-list">
                           <li><a href="../Home/">Home</a></li>
                           <li><a href="#">Modules</a></li>
                           <li><a href="#">Overview</a></li>
                           <li><a href="#">Resources</a></li>
                           <li><a href="#">Projects</a></li>
                           <li><a href="#">References</a></li>
                           <li><a href="#">Contact</a></li>
                        </ul>
                     </div>
                     <span><button id="low-nav-width-btn">☰</button></span> <!-- Outside of the dropdown-->
                  </div>
               </li>
               <!-- A Search form [API]; Uses Users Key Terms and Compares them to A Database of Related Webpages(Modules + Nav Pages) (All Webpages Will Have a Set of Key Terms Related to Their Existence)-->
            </ul>
            <!-- Add a helper bot that answers FAQ and sends emails -->
            <!-- Could be annoying so make it very transparent untill hovered over -->
            <!-- A one time greet that takes the user through the main page -->
         </nav>
      </header>
      <footer>
         <!-- Random Quotes From Famous Programmers -->
         <p>programming fundamentals for all</p>
         <!-- link different social media pages -->
      </footer>
   </body>
   <!--<script src="DarkMode.js"></script> Add A Color Changer, Everything But White-->
   <script src="JavaScript/LowNavWidth.js"></script>
   <script src="JavaScript/recentModules.js"></script>
   <script src="JavaScript/Search.js"></script>
   <script src="JavaScript/Misc.js"></script> 
   <script type="text/javascript">
      function HomeSearch() {
        var searchResultsContent = document.getElementById('home-search-results-content');
        var searchBox = document.getElementById('home-search-box');
        var results = new Set();
      
        var devLog = false;
      
        function resetResults() {
            while (searchResultsContent.firstChild) {searchResultsContent.removeChild(searchResultsContent.lastChild) }
            results = new Set();
        }
      
        var input = document.getElementById("home-input-search").value.toLowerCase();
        fetch("en-us/Metadata/Modules.json")
            .then(response => response.json())
            .then(modules => {
                for (let modulesIndex = 0; modulesIndex < modules.length; modulesIndex++) {
                    if (input == " " || results.has(modules[modulesIndex].href)) {
                        if(devLog) { console.error(`Results Already Contains User Input... Resetting: ${results}, Or Space Is The Only Input`) }
                        resetResults();
                        return;
                    } else if(modules[modulesIndex].keyTerms.filter(keyTerms => keyTerms.startsWith(input)).length > 0 && input.length > 0){
                        if(devLog) { console.log(`Found ${modules[modulesIndex].name}... Appending Potential href`) }
                        results.add(modules[modulesIndex].href);
                    } else if((modules[modulesIndex].name.replace(' ','').toLowerCase().startsWith(input.replace(' ',''))) && input.length > 0){
                        if(devLog) { console.log(`Found ${modules[modulesIndex].name}... Appending Potential href`) }
                        results.add(modules[modulesIndex].href);
                    }
                    
                    if (results.has(modules[modulesIndex].href)) {
                        var searchResult = document.createElement("a");
                        searchResult.innerHTML = modules[modulesIndex].name;
                        searchResult.href = modules[modulesIndex].href;
                        searchResult.className = "home-results-lists";
                        document.body.appendChild(searchResult);
                        searchResultsContent.appendChild(searchResult);
                    }
                }
      
                function visibility(boolean) {
                    if (boolean) {
                        searchResultsContent.style.visibility = "visible";
                        searchResultsContent.style.opacity = "75%";
                        searchResultsContent.style.pointerEvents = "all";
                    } else {
                        searchResultsContent.style.visibility = "hidden";
                        searchResultsContent.style.opacity = "0%";
                        searchResultsContent.style.pointerEvents = "none";
                    }
                }
      
                results.size > 0 ? visibility(true) : visibility(false);
                searchBox.onmousedown = function() { if (results.size > 0) { visibility(true) }}
                searchBox.onmouseleave = function() { visibility(false) }
            })
      
        if(devLog) { console.log(`Search Request Complete: ${results.values()}`); }
        resetResults();
      }
      
      window.addEventListener('load', function() {
      var currentString = [];
      var currentSecArrPos = 0;
      var arrOfWordsPostion = 0;
      var timeSpeed = 150;
      var arrOfWords = [["H","e","l","l","o"," ","W","o","r","l","d"," "," "," "],["F","o","r"," ","L","o","o","p","s"," "," "," "],["A","l","g","o","r","i","t","m","s"," "," "," "],["D", "a", "t", "a"," ", "S", "t", "r", "u", "c", "t", "u", "r", "e","s"," "," "," "],["C", "o", "m", "p", "u", "t", "e", "r"," ", "H", "i", "s", "t", "o", "r", "y"," "," "," "]];
      var interval = setInterval(function(){
      document.getElementById("home-input-search").placeholder = `Search... ${currentString.join("")}`;
      
      if(arrOfWordsPostion == arrOfWords.length) {
        arrOfWordsPostion = 0;
      } else if(currentSecArrPos < arrOfWords[arrOfWordsPostion].length) {
      currentString.push(arrOfWords[arrOfWordsPostion][currentSecArrPos]);
      currentSecArrPos += 1;
      } else if(currentString.length > 0){
        currentString.pop();
      } else if(currentString.length == 0) {
        currentSecArrPos = 0;
        arrOfWordsPostion += 1;
      }
      }, timeSpeed);
      })
   </script>
</html>
